# üåê AtonWebApi

&#x20;  &#x20;

> **Web API** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (`User`), —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –Ω–∞ **.NET¬†9**, –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—â–µ–µ **Clean¬†Architecture**, **CQRS**, **MediatR**, **EF¬†Core InMemory** –∏ **AutoMapper**. –î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏, –∞ Swagger¬†UI –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤.

---

## üöÄ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª CRUD** –Ω–∞–¥ —Å—É—â–Ω–æ—Å—Ç—å—é `User`:
  - **Create** ‚Äî POST `/api/users`
  - **Read**   ‚Äî GET `/api/users` –∏ GET `/api/users/{login}`
  - **Update** ‚Äî PUT `/api/users/profile/{login}`, `/api/users/password/{login}`, `/api/users/login/{login}`
  - **Delete** ‚Äî DELETE `/api/users/{login}?hard=[true|false]`
  - **Restore**‚Äî PUT `/api/users/restore/{login}`
- **–†–æ–ª–µ–≤–æ–π –¥–æ—Å—Ç—É–ø** —á–µ—Ä–µ–∑ –∑–∞–≥–æ–ª–æ–≤–æ–∫ `X-Current-User`:
  - **Admin** –º–æ–∂–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –≤—Å–µ–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏.
  - **Self** (–∞–∫—Ç–∏–≤–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å) –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å, –ø–∞—Ä–æ–ª—å –∏ –ª–æ–≥–∏–Ω.
- **CQRS + MediatR**
  - –õ–æ–≥–∏–∫–∞ —Ä–∞–∑–¥–µ–ª–µ–Ω–∞ –Ω–∞ –∫–æ–º–∞–Ω–¥—ã –∏ –∑–∞–ø—Ä–æ—Å—ã (Handlers) –±–µ–∑ ¬´—Ç–æ–ª—Å—Ç—ã—Ö¬ª –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤.
- **EF¬†Core InMemory**
  - –ü—Ä–æ—Å—Ç–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –ø–∞–º—è—Ç–∏ –¥–ª—è –¥–µ–º–æ; –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –≤—Å–µ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è.
- **AutoMapper**
  - –ë—ã—Å—Ç—Ä—ã–π –º–∞–ø–ø–∏–Ω–≥ —Å—É—â–Ω–æ—Å—Ç–µ–π –≤ DTO –∏ –æ–±—Ä–∞—Ç–Ω–æ.
- **Swagger¬†UI**
  - –ü–æ–ª–Ω–∞—è OpenAPI-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: –∫–∞–∂–¥–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è —Å–Ω–∞–±–∂–µ–Ω–∞ XML-–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ –∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏.
- **Seed Admin**
  - –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å `Admin`/`Admin123`, —É –∫–æ—Ç–æ—Ä–æ–≥–æ –µ—Å—Ç—å –≤—Å–µ –ø—Ä–∞–≤–∞.

---

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
AtonWebApi.sln
‚îî‚îÄ‚îÄ src/
    ‚îú‚îÄ‚îÄ AtonWebApi.Domain/           # –°—É—â–Ω–æ—Å—Ç–∏ –∏ Enums
    ‚îú‚îÄ‚îÄ AtonWebApi.Application/      # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã, DTO, CQRS –∫–æ–º–∞–Ω–¥—ã –∏ Handlers
    ‚îú‚îÄ‚îÄ AtonWebApi.Infrastructure/   # EF¬†Core DbContext –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
    ‚îî‚îÄ‚îÄ AtonWebApi.Api/              # ASP.NET Core Web API (–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã, DI, Swagger)
‚îî‚îÄ‚îÄ tests/
    ‚îî‚îÄ‚îÄ AtonWebApi.Tests/            # –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã (xUnit, Moq, EF¬†Core InMemory)
    ‚îî‚îÄ‚îÄ AtonWebApi.InegrationTests/  # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (WebApplicationFactory)
```

---

## ‚öôÔ∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **.NET¬†9 / ASP.NET¬†Core**
- **Entity¬†Framework¬†Core** (InMemory)
- **MediatR** (CQRS)
- **AutoMapper**
- **Swashbuckle¬†(Swagger¬†UI)**
- **xUnit + Moq** (—é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã)

---

## üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**
   ```bash
   git clone https://github.com/Avazbek22/AtonWebApi.git
   cd AtonWebApi
   ```
2. **–°–±–æ—Ä–∫–∞**
   ```bash
   dotnet build
   ```
3. **–ó–∞–ø—É—Å–∫ Web API**
   ```bash
   cd src/AtonWebApi.Api
   dotnet run
   ```
   Swagger –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:
   ```
   https://localhost:5102/swagger/index.html
   ```
4. **–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤**
   ```bash
   cd tests/AtonWebApi.Tests
   dotnet test
   ```

---

## üìù –û–ø–∏—Å–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã

1. **Seed Admin**: –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ `Admin`, –∏–Ω–∞—á–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è —Å –ø–∞—Ä–æ–ª–µ–º `Admin123`.
2. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: —ç–º—É–ª—è—Ü–∏—è —á–µ—Ä–µ–∑ –∑–∞–≥–æ–ª–æ–≤–æ–∫ `X-Current-User`, —Ä–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –≤ Handler‚Äô–∞—Ö.
3. **CQRS**: –∫–∞–∂–¥—ã–π —ç–∫—à–µ–Ω –æ–±—ë—Ä–Ω—É—Ç –≤ –∫–æ–º–∞–Ω–¥—É –∏–ª–∏ –∑–∞–ø—Ä–æ—Å. Handlers —Å–æ–¥–µ—Ä–∂–∞—Ç –ª–æ–≥–∏–∫—É —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–º –∏ –ø—Ä–æ–≤–µ—Ä–∫—É –ø—Ä–∞–≤.
4. **–ú–∞–ø–ø–∏–Ω–≥**: AutoMapper –ø—Ä–æ—Ñ–∏–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç `User` ‚Üî `UserViewDto`.
5. **–•—Ä–∞–Ω–µ–Ω–∏–µ**: EF¬†Core InMemory –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–µ–º–æ; –ª–µ–≥–∫–æ —Å–º–µ–Ω–∏—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—É—é –ë–î.

---

## üìà –î–∞–ª—å–Ω–µ–π—à–µ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ

- –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (*SQL Server/PostgreSQL*)
- –î–æ–±–∞–≤–∏—Ç—å **JWT**-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
- –í–Ω–µ–¥—Ä–∏—Ç—å **FluentValidation** –¥–ª—è DTO
- –ü–æ–¥–∫–ª—é—á–∏—Ç—å **CI/CD** (GitHub Actions) –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–±–æ—Ä–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---
